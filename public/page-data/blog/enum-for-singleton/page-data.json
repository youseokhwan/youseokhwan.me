{"componentChunkName":"component---src-templates-blog-post-tsx","path":"/blog/enum-for-singleton/","result":{"data":{"markdownRemark":{"html":"<h2>Singleton</h2>\n<p>Singleton은 클래스의 인스턴스 개수를 1개로 제한하는 디자인 패턴이다.<br>\niOS의 대표적인 예시로는 <code>UserDefaults</code>, <code>URLSession</code> 등이 있다.</p>\n<h3>장점</h3>\n<ul>\n<li>메모리 효율: 단일 인스턴스기 때문에, 한번 생성한 인스턴스를 재사용하며 공간 효율을 최적화할 수 있다.</li>\n<li>데이터 공유: 인스턴스가 전역으로 사용되기 때문에, 데이터 공유가 편하다.</li>\n</ul>\n<h3>단점</h3>\n<ul>\n<li>테스트 어려움: 데이터 공유가 편한 대신, 컴포넌트간 결합도가 높아져 테스트가 어려워진다.</li>\n<li>멀티 스레드 문제: 전역으로 사용되는 만큼, race condition 우려가 있다.</li>\n<li>SOLID 위반하기 쉬움: 접근성이 좋아서 여러 역할을 추가하다보면 SRP, DIP, OCP 등 객체지향 설계 원칙(SOLID)을 위반하기 쉽다.</li>\n</ul>\n<p>Concurrency, 의존성 주입 등 개선 방법은 있지만, 단점이 뚜렷하여 Singleton을 안티 패턴으로 취급하기도 한다.</p>\n<hr>\n<h2>class로 Singleton 구현</h2>\n<p>class로 Singleton을 구현해보자.<br>\nGET 요청으로 JSON 데이터(<code>Post</code>)를 가져오는 <code>NetworkManager</code>이다.</p>\n<pre class=\"grvsc-container github-light-theme grvsc-ps-t4tStz\" data-language=\"swift\" data-index=\"0\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"grvsc-tiszgT-5 grvsc-t4tStz-9\">struct</span><span class=\"grvsc-tiszgT-1 grvsc-t4tStz-1\"> </span><span class=\"grvsc-tiszgT-10 grvsc-t4tStz-1\">Post</span><span class=\"grvsc-tiszgT-1 grvsc-t4tStz-1\">: Codable {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"grvsc-tiszgT-1 grvsc-t4tStz-1\">    </span><span class=\"grvsc-tiszgT-5 grvsc-t4tStz-9\">let</span><span class=\"grvsc-tiszgT-1 grvsc-t4tStz-1\"> id</span><span class=\"grvsc-tiszgT-1 grvsc-t4tStz-9\">:</span><span class=\"grvsc-tiszgT-1 grvsc-t4tStz-1\"> </span><span class=\"grvsc-tiszgT-7 grvsc-t4tStz-3\">Int</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"grvsc-tiszgT-1 grvsc-t4tStz-1\">    </span><span class=\"grvsc-tiszgT-5 grvsc-t4tStz-9\">let</span><span class=\"grvsc-tiszgT-1 grvsc-t4tStz-1\"> title</span><span class=\"grvsc-tiszgT-1 grvsc-t4tStz-9\">:</span><span class=\"grvsc-tiszgT-1 grvsc-t4tStz-1\"> </span><span class=\"grvsc-tiszgT-7 grvsc-t4tStz-3\">String</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"grvsc-tiszgT-1 grvsc-t4tStz-1\">    </span><span class=\"grvsc-tiszgT-5 grvsc-t4tStz-9\">let</span><span class=\"grvsc-tiszgT-1 grvsc-t4tStz-1\"> body</span><span class=\"grvsc-tiszgT-1 grvsc-t4tStz-9\">:</span><span class=\"grvsc-tiszgT-1 grvsc-t4tStz-1\"> </span><span class=\"grvsc-tiszgT-7 grvsc-t4tStz-3\">String</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"grvsc-tiszgT-1 grvsc-t4tStz-1\">}</span></span></span></code></pre>\n<pre class=\"grvsc-container github-light-theme grvsc-ps-t4tStz\" data-language=\"swift\" data-index=\"1\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"grvsc-tiszgT-5 grvsc-t4tStz-9\">class</span><span class=\"grvsc-tiszgT-1 grvsc-t4tStz-1\"> </span><span class=\"grvsc-tiszgT-10 grvsc-t4tStz-5\">NetworkManager</span><span class=\"grvsc-tiszgT-1 grvsc-t4tStz-1\"> {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"grvsc-tiszgT-1 grvsc-t4tStz-1\">    </span><span class=\"grvsc-tiszgT-5 grvsc-t4tStz-9\">static</span><span class=\"grvsc-tiszgT-1 grvsc-t4tStz-1\"> </span><span class=\"grvsc-tiszgT-5 grvsc-t4tStz-9\">let</span><span class=\"grvsc-tiszgT-1 grvsc-t4tStz-1\"> shared </span><span class=\"grvsc-tiszgT-1 grvsc-t4tStz-9\">=</span><span class=\"grvsc-tiszgT-1 grvsc-t4tStz-1\"> </span><span class=\"grvsc-tiszgT-7 grvsc-t4tStz-1\">NetworkManager</span><span class=\"grvsc-tiszgT-1 grvsc-t4tStz-1\">()</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"grvsc-tiszgT-1 grvsc-t4tStz-1\">    </span><span class=\"grvsc-tiszgT-5 grvsc-t4tStz-9\">private</span><span class=\"grvsc-tiszgT-1 grvsc-t4tStz-1\"> </span><span class=\"grvsc-tiszgT-5 grvsc-t4tStz-9\">init</span><span class=\"grvsc-tiszgT-1 grvsc-t4tStz-1\">() {}</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"grvsc-tiszgT-1 grvsc-t4tStz-1\">    </span><span class=\"grvsc-tiszgT-5 grvsc-t4tStz-9\">func</span><span class=\"grvsc-tiszgT-1 grvsc-t4tStz-1\"> </span><span class=\"grvsc-tiszgT-10 grvsc-t4tStz-5\">fetchPosts</span><span class=\"grvsc-tiszgT-1 grvsc-t4tStz-1\">() async </span><span class=\"grvsc-tiszgT-5 grvsc-t4tStz-9\">throws</span><span class=\"grvsc-tiszgT-1 grvsc-t4tStz-1\"> </span><span class=\"grvsc-tiszgT-1 grvsc-t4tStz-9\">-&gt;</span><span class=\"grvsc-tiszgT-1 grvsc-t4tStz-1\"> [Post] {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"grvsc-tiszgT-1 grvsc-t4tStz-1\">        </span><span class=\"grvsc-tiszgT-5 grvsc-t4tStz-9\">let</span><span class=\"grvsc-tiszgT-1 grvsc-t4tStz-1\"> url </span><span class=\"grvsc-tiszgT-1 grvsc-t4tStz-9\">=</span><span class=\"grvsc-tiszgT-1 grvsc-t4tStz-1\"> </span><span class=\"grvsc-tiszgT-7 grvsc-t4tStz-1\">URL</span><span class=\"grvsc-tiszgT-1 grvsc-t4tStz-1\">(</span><span class=\"grvsc-tiszgT-7 grvsc-t4tStz-1\">string</span><span class=\"grvsc-tiszgT-1 grvsc-t4tStz-1\">: </span><span class=\"grvsc-tiszgT-8 grvsc-t4tStz-10\">&quot;https://jsonplaceholder.typicode.com/posts&quot;</span><span class=\"grvsc-tiszgT-1 grvsc-t4tStz-1\">)</span><span class=\"grvsc-tiszgT-1 grvsc-t4tStz-9\">!</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"grvsc-tiszgT-1 grvsc-t4tStz-1\">        </span><span class=\"grvsc-tiszgT-5 grvsc-t4tStz-9\">let</span><span class=\"grvsc-tiszgT-1 grvsc-t4tStz-1\"> (data, </span><span class=\"grvsc-tiszgT-7 grvsc-t4tStz-1\">_</span><span class=\"grvsc-tiszgT-1 grvsc-t4tStz-1\">) </span><span class=\"grvsc-tiszgT-1 grvsc-t4tStz-9\">=</span><span class=\"grvsc-tiszgT-1 grvsc-t4tStz-1\"> </span><span class=\"grvsc-tiszgT-5 grvsc-t4tStz-9\">try</span><span class=\"grvsc-tiszgT-1 grvsc-t4tStz-1\"> await URLSession.shared.</span><span class=\"grvsc-tiszgT-7 grvsc-t4tStz-1\">data</span><span class=\"grvsc-tiszgT-1 grvsc-t4tStz-1\">(</span><span class=\"grvsc-tiszgT-7 grvsc-t4tStz-1\">from</span><span class=\"grvsc-tiszgT-1 grvsc-t4tStz-1\">: url)</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"grvsc-tiszgT-1 grvsc-t4tStz-1\">        </span><span class=\"grvsc-tiszgT-5 grvsc-t4tStz-9\">return</span><span class=\"grvsc-tiszgT-1 grvsc-t4tStz-1\"> </span><span class=\"grvsc-tiszgT-5 grvsc-t4tStz-9\">try</span><span class=\"grvsc-tiszgT-1 grvsc-t4tStz-1\"> </span><span class=\"grvsc-tiszgT-7 grvsc-t4tStz-1\">JSONDecoder</span><span class=\"grvsc-tiszgT-1 grvsc-t4tStz-1\">().</span><span class=\"grvsc-tiszgT-7 grvsc-t4tStz-1\">decode</span><span class=\"grvsc-tiszgT-1 grvsc-t4tStz-1\">([Post].</span><span class=\"grvsc-tiszgT-1 grvsc-t4tStz-9\">self</span><span class=\"grvsc-tiszgT-1 grvsc-t4tStz-1\">, </span><span class=\"grvsc-tiszgT-7 grvsc-t4tStz-1\">from</span><span class=\"grvsc-tiszgT-1 grvsc-t4tStz-1\">: data)</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"grvsc-tiszgT-1 grvsc-t4tStz-1\">    }</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"grvsc-tiszgT-1 grvsc-t4tStz-1\">}</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"grvsc-tiszgT-1 grvsc-t4tStz-1\">Task {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"grvsc-tiszgT-1 grvsc-t4tStz-1\">    </span><span class=\"grvsc-tiszgT-5 grvsc-t4tStz-9\">do</span><span class=\"grvsc-tiszgT-1 grvsc-t4tStz-1\"> {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"grvsc-tiszgT-1 grvsc-t4tStz-1\">        </span><span class=\"grvsc-tiszgT-5 grvsc-t4tStz-9\">let</span><span class=\"grvsc-tiszgT-1 grvsc-t4tStz-1\"> posts </span><span class=\"grvsc-tiszgT-1 grvsc-t4tStz-9\">=</span><span class=\"grvsc-tiszgT-1 grvsc-t4tStz-1\"> </span><span class=\"grvsc-tiszgT-5 grvsc-t4tStz-9\">try</span><span class=\"grvsc-tiszgT-1 grvsc-t4tStz-1\"> await NetworkManager.shared.</span><span class=\"grvsc-tiszgT-7 grvsc-t4tStz-1\">fetchPosts</span><span class=\"grvsc-tiszgT-1 grvsc-t4tStz-1\">()</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"grvsc-tiszgT-1 grvsc-t4tStz-1\">        </span><span class=\"grvsc-tiszgT-7 grvsc-t4tStz-1\">print</span><span class=\"grvsc-tiszgT-1 grvsc-t4tStz-1\">(</span><span class=\"grvsc-tiszgT-8 grvsc-t4tStz-10\">&quot;포스트 개수: \\(</span><span class=\"grvsc-tiszgT-1 grvsc-t4tStz-10\">posts.</span><span class=\"grvsc-tiszgT-7 grvsc-t4tStz-10\">count</span><span class=\"grvsc-tiszgT-8 grvsc-t4tStz-10\">)&quot;</span><span class=\"grvsc-tiszgT-1 grvsc-t4tStz-1\">)</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"grvsc-tiszgT-1 grvsc-t4tStz-1\">    } </span><span class=\"grvsc-tiszgT-5 grvsc-t4tStz-9\">catch</span><span class=\"grvsc-tiszgT-1 grvsc-t4tStz-1\"> {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"grvsc-tiszgT-1 grvsc-t4tStz-1\">        </span><span class=\"grvsc-tiszgT-7 grvsc-t4tStz-1\">print</span><span class=\"grvsc-tiszgT-1 grvsc-t4tStz-1\">(</span><span class=\"grvsc-tiszgT-8 grvsc-t4tStz-10\">&quot;Error: \\(</span><span class=\"grvsc-tiszgT-1 grvsc-t4tStz-10\">error.localizedDescription</span><span class=\"grvsc-tiszgT-8 grvsc-t4tStz-10\">)&quot;</span><span class=\"grvsc-tiszgT-1 grvsc-t4tStz-1\">)</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"grvsc-tiszgT-1 grvsc-t4tStz-1\">    }</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"grvsc-tiszgT-1 grvsc-t4tStz-1\">}</span></span></span></code></pre>\n<p>단일 인스턴스인 <code>shared</code>를 통해 전역에서 편하게 접근할 수 있다.<br>\n또한, <code>init()</code>을 <code>private</code>으로 선언했기 때문에 외부에서 새로운 인스턴스를 생성할 수 없다.</p>\n<hr>\n<h2>enum으로 Singleton 구현</h2>\n<p>enum은 enumerations이라는 이름 그대로 열거형 타입을 정의할 때 사용하지만,<br>\nSwift에서는 약간의 트릭?으로 namespace의 역할을 하기도 한다.</p>\n<p><code>NetworkManager</code>를 enum으로 migration 해보자.</p>\n<pre class=\"grvsc-container github-light-theme grvsc-ps-t4tStz\" data-language=\"swift\" data-index=\"2\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"grvsc-tiszgT-5 grvsc-t4tStz-9\">enum</span><span class=\"grvsc-tiszgT-1 grvsc-t4tStz-1\"> </span><span class=\"grvsc-tiszgT-10 grvsc-t4tStz-1\">NetworkManager</span><span class=\"grvsc-tiszgT-1 grvsc-t4tStz-1\"> {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"grvsc-tiszgT-1 grvsc-t4tStz-1\">    </span><span class=\"grvsc-tiszgT-5 grvsc-t4tStz-9\">static</span><span class=\"grvsc-tiszgT-1 grvsc-t4tStz-1\"> </span><span class=\"grvsc-tiszgT-5 grvsc-t4tStz-9\">func</span><span class=\"grvsc-tiszgT-1 grvsc-t4tStz-1\"> </span><span class=\"grvsc-tiszgT-10 grvsc-t4tStz-5\">fetchPosts</span><span class=\"grvsc-tiszgT-1 grvsc-t4tStz-1\">() async </span><span class=\"grvsc-tiszgT-5 grvsc-t4tStz-9\">throws</span><span class=\"grvsc-tiszgT-1 grvsc-t4tStz-1\"> </span><span class=\"grvsc-tiszgT-1 grvsc-t4tStz-9\">-&gt;</span><span class=\"grvsc-tiszgT-1 grvsc-t4tStz-1\"> [Post] {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"grvsc-tiszgT-1 grvsc-t4tStz-1\">        </span><span class=\"grvsc-tiszgT-5 grvsc-t4tStz-9\">let</span><span class=\"grvsc-tiszgT-1 grvsc-t4tStz-1\"> url </span><span class=\"grvsc-tiszgT-1 grvsc-t4tStz-9\">=</span><span class=\"grvsc-tiszgT-1 grvsc-t4tStz-1\"> </span><span class=\"grvsc-tiszgT-7 grvsc-t4tStz-1\">URL</span><span class=\"grvsc-tiszgT-1 grvsc-t4tStz-1\">(</span><span class=\"grvsc-tiszgT-7 grvsc-t4tStz-1\">string</span><span class=\"grvsc-tiszgT-1 grvsc-t4tStz-1\">: </span><span class=\"grvsc-tiszgT-8 grvsc-t4tStz-10\">&quot;https://jsonplaceholder.typicode.com/posts&quot;</span><span class=\"grvsc-tiszgT-1 grvsc-t4tStz-1\">)</span><span class=\"grvsc-tiszgT-1 grvsc-t4tStz-9\">!</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"grvsc-tiszgT-1 grvsc-t4tStz-1\">        </span><span class=\"grvsc-tiszgT-5 grvsc-t4tStz-9\">let</span><span class=\"grvsc-tiszgT-1 grvsc-t4tStz-1\"> (data, </span><span class=\"grvsc-tiszgT-7 grvsc-t4tStz-1\">_</span><span class=\"grvsc-tiszgT-1 grvsc-t4tStz-1\">) </span><span class=\"grvsc-tiszgT-1 grvsc-t4tStz-9\">=</span><span class=\"grvsc-tiszgT-1 grvsc-t4tStz-1\"> </span><span class=\"grvsc-tiszgT-5 grvsc-t4tStz-9\">try</span><span class=\"grvsc-tiszgT-1 grvsc-t4tStz-1\"> await URLSession.shared.</span><span class=\"grvsc-tiszgT-7 grvsc-t4tStz-1\">data</span><span class=\"grvsc-tiszgT-1 grvsc-t4tStz-1\">(</span><span class=\"grvsc-tiszgT-7 grvsc-t4tStz-1\">from</span><span class=\"grvsc-tiszgT-1 grvsc-t4tStz-1\">: url)</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"grvsc-tiszgT-1 grvsc-t4tStz-1\">        </span><span class=\"grvsc-tiszgT-5 grvsc-t4tStz-9\">return</span><span class=\"grvsc-tiszgT-1 grvsc-t4tStz-1\"> </span><span class=\"grvsc-tiszgT-5 grvsc-t4tStz-9\">try</span><span class=\"grvsc-tiszgT-1 grvsc-t4tStz-1\"> </span><span class=\"grvsc-tiszgT-7 grvsc-t4tStz-1\">JSONDecoder</span><span class=\"grvsc-tiszgT-1 grvsc-t4tStz-1\">().</span><span class=\"grvsc-tiszgT-7 grvsc-t4tStz-1\">decode</span><span class=\"grvsc-tiszgT-1 grvsc-t4tStz-1\">([Post].</span><span class=\"grvsc-tiszgT-1 grvsc-t4tStz-9\">self</span><span class=\"grvsc-tiszgT-1 grvsc-t4tStz-1\">, </span><span class=\"grvsc-tiszgT-7 grvsc-t4tStz-1\">from</span><span class=\"grvsc-tiszgT-1 grvsc-t4tStz-1\">: data)</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"grvsc-tiszgT-1 grvsc-t4tStz-1\">    }</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"grvsc-tiszgT-1 grvsc-t4tStz-1\">}</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"grvsc-tiszgT-1 grvsc-t4tStz-1\">Task {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"grvsc-tiszgT-1 grvsc-t4tStz-1\">    </span><span class=\"grvsc-tiszgT-5 grvsc-t4tStz-9\">do</span><span class=\"grvsc-tiszgT-1 grvsc-t4tStz-1\"> {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"grvsc-tiszgT-1 grvsc-t4tStz-1\">        </span><span class=\"grvsc-tiszgT-5 grvsc-t4tStz-9\">let</span><span class=\"grvsc-tiszgT-1 grvsc-t4tStz-1\"> posts </span><span class=\"grvsc-tiszgT-1 grvsc-t4tStz-9\">=</span><span class=\"grvsc-tiszgT-1 grvsc-t4tStz-1\"> </span><span class=\"grvsc-tiszgT-5 grvsc-t4tStz-9\">try</span><span class=\"grvsc-tiszgT-1 grvsc-t4tStz-1\"> await NetworkManager.</span><span class=\"grvsc-tiszgT-7 grvsc-t4tStz-1\">fetchPosts</span><span class=\"grvsc-tiszgT-1 grvsc-t4tStz-1\">()</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"grvsc-tiszgT-1 grvsc-t4tStz-1\">        </span><span class=\"grvsc-tiszgT-7 grvsc-t4tStz-1\">print</span><span class=\"grvsc-tiszgT-1 grvsc-t4tStz-1\">(</span><span class=\"grvsc-tiszgT-8 grvsc-t4tStz-10\">&quot;포스트 개수: \\(</span><span class=\"grvsc-tiszgT-1 grvsc-t4tStz-10\">posts.</span><span class=\"grvsc-tiszgT-7 grvsc-t4tStz-10\">count</span><span class=\"grvsc-tiszgT-8 grvsc-t4tStz-10\">)&quot;</span><span class=\"grvsc-tiszgT-1 grvsc-t4tStz-1\">)</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"grvsc-tiszgT-1 grvsc-t4tStz-1\">    } </span><span class=\"grvsc-tiszgT-5 grvsc-t4tStz-9\">catch</span><span class=\"grvsc-tiszgT-1 grvsc-t4tStz-1\"> {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"grvsc-tiszgT-1 grvsc-t4tStz-1\">        </span><span class=\"grvsc-tiszgT-7 grvsc-t4tStz-1\">print</span><span class=\"grvsc-tiszgT-1 grvsc-t4tStz-1\">(</span><span class=\"grvsc-tiszgT-8 grvsc-t4tStz-10\">&quot;Error: \\(</span><span class=\"grvsc-tiszgT-1 grvsc-t4tStz-10\">error.localizedDescription</span><span class=\"grvsc-tiszgT-8 grvsc-t4tStz-10\">)&quot;</span><span class=\"grvsc-tiszgT-1 grvsc-t4tStz-1\">)</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"grvsc-tiszgT-1 grvsc-t4tStz-1\">    }</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"grvsc-tiszgT-1 grvsc-t4tStz-1\">}</span></span></span></code></pre>\n<p>enum을 이용해 인스턴스 자체를 만들지 않고, 타입 프로퍼티로 접근하여 같은 기능을 구현했다.<br>\n(아예 인스턴스가 없는데 Singleton이라고 명명해도 될까?)</p>\n<hr>\n<h2>class Singleton vs enum Singleton</h2>\n<p>enum Singleton은 class Singleton과 비교해 다음과 같은 장점이 있다.</p>\n<ul>\n<li>enum은 인스턴스 생성을 원천적으로 차단하므로 더 안전하다.</li>\n<li><code>private init()</code>을 작성하지 않아도 되고, 접근할 때도 타입 프로퍼티로 바로 접근하기에 구문이 더 간결해진다.</li>\n<li>heap에 할당되지 않기에, 상태 값이 필요없는 경우(stateless)에 적합하다.</li>\n</ul>\n<p>그렇다면 항상 enum을 쓰는게 좋은가? 그렇지는 않다.</p>\n<ul>\n<li>state 저장이 필요한 경우 class Singleton을 써야한다.</li>\n<li>테스트할 때 mocking이 어렵다.</li>\n<li>프로토콜을 채택할 때 제약이 있을 수 있다.</li>\n</ul>\n<hr>\n<p>단순 Utility나 Helper의 목적으로 state 없이 class Singleton을 사용하고 있다면, enum Singleton으로 migration을 고려해볼 수 있다.<br>\nenum을 채택하지 않더라도, namespace로 사용하는 방식은 종종 볼 수 있기에 인지하고 있으면 좋을 것 같다.</p>\n<hr>\n<h3>참고</h3>\n<ul>\n<li><a href=\"https://velog.io/@wlsrhkd4023/Design-Pattern-%EC%8B%B1%EA%B8%80%ED%86%A4-%ED%8C%A8%ED%84%B4Singleton-Pattern-rzs6f6vd\">https://velog.io/@wlsrhkd4023/Design-Pattern-%EC%8B%B1%EA%B8%80%ED%86%A4-%ED%8C%A8%ED%84%B4Singleton-Pattern-rzs6f6vd</a></li>\n<li><a href=\"https://inpa.tistory.com/entry/GOF-%F0%9F%92%A0-%EC%8B%B1%EA%B8%80%ED%86%A4Singleton-%ED%8C%A8%ED%84%B4-%EA%BC%BC%EA%BC%BC%ED%95%98%EA%B2%8C-%EC%95%8C%EC%95%84%EB%B3%B4%EC%9E%90#%EC%8B%B1%EA%B8%80%ED%86%A4%EC%9D%98_%EB%AC%B8%EC%A0%9C%EC%A0%90\">https://inpa.tistory.com/entry/GOF-%F0%9F%92%A0-%EC%8B%B1%EA%B8%80%ED%86%A4Singleton-%ED%8C%A8%ED%84%B4-%EA%BC%BC%EA%BC%BC%ED%95%98%EA%B2%8C-%EC%95%8C%EC%95%84%EB%B3%B4%EC%9E%90#%EC%8B%B1%EA%B8%80%ED%86%A4%EC%9D%98_%EB%AC%B8%EC%A0%9C%EC%A0%90</a></li>\n<li><a href=\"https://medium.com/@cgoldsby/swift-an-enum-for-a-singleton-9f8a1780a21f\">https://medium.com/@cgoldsby/swift-an-enum-for-a-singleton-9f8a1780a21f</a></li>\n<li><a href=\"https://medium.com/@Jager-yoo/swift-%EB%8B%A4%EC%8B%9C-%EA%B3%B5%EB%B6%80%ED%95%98%EB%8A%94-%EC%8B%B1%EA%B8%80%ED%84%B4-singleton-%ED%8C%A8%ED%84%B4-a013757775bc\">https://medium.com/@Jager-yoo/swift-%EB%8B%A4%EC%8B%9C-%EA%B3%B5%EB%B6%80%ED%95%98%EB%8A%94-%EC%8B%B1%EA%B8%80%ED%84%B4-singleton-%ED%8C%A8%ED%84%B4-a013757775bc</a></li>\n<li><a href=\"https://zeddios.tistory.com/353\">https://zeddios.tistory.com/353</a></li>\n<li><a href=\"https://medium.com/@jamshehadeh/your-guide-to-a-thread-safe-singleton-in-swift-part-i-17633c5a65fe\">https://medium.com/@jamshehadeh/your-guide-to-a-thread-safe-singleton-in-swift-part-i-17633c5a65fe</a></li>\n</ul>\n<style class=\"grvsc-styles\">\n  .grvsc-container {\n    overflow: auto;\n    position: relative;\n    -webkit-overflow-scrolling: touch;\n    padding-top: 1rem;\n    padding-top: var(--grvsc-padding-top, var(--grvsc-padding-v, 1rem));\n    padding-bottom: 1rem;\n    padding-bottom: var(--grvsc-padding-bottom, var(--grvsc-padding-v, 1rem));\n    border-radius: 8px;\n    border-radius: var(--grvsc-border-radius, 8px);\n    font-feature-settings: normal;\n    line-height: 1.4;\n  }\n  \n  .grvsc-code {\n    display: table;\n  }\n  \n  .grvsc-line {\n    display: table-row;\n    box-sizing: border-box;\n    width: 100%;\n    position: relative;\n  }\n  \n  .grvsc-line > * {\n    position: relative;\n  }\n  \n  .grvsc-gutter-pad {\n    display: table-cell;\n    padding-left: 0.75rem;\n    padding-left: calc(var(--grvsc-padding-left, var(--grvsc-padding-h, 1.5rem)) / 2);\n  }\n  \n  .grvsc-gutter {\n    display: table-cell;\n    -webkit-user-select: none;\n    -moz-user-select: none;\n    user-select: none;\n  }\n  \n  .grvsc-gutter::before {\n    content: attr(data-content);\n  }\n  \n  .grvsc-source {\n    display: table-cell;\n    padding-left: 1.5rem;\n    padding-left: var(--grvsc-padding-left, var(--grvsc-padding-h, 1.5rem));\n    padding-right: 1.5rem;\n    padding-right: var(--grvsc-padding-right, var(--grvsc-padding-h, 1.5rem));\n  }\n  \n  .grvsc-source:empty::after {\n    content: ' ';\n    -webkit-user-select: none;\n    -moz-user-select: none;\n    user-select: none;\n  }\n  \n  .grvsc-gutter + .grvsc-source {\n    padding-left: 0.75rem;\n    padding-left: calc(var(--grvsc-padding-left, var(--grvsc-padding-h, 1.5rem)) / 2);\n  }\n  \n  /* Line transformer styles */\n  \n  .grvsc-has-line-highlighting > .grvsc-code > .grvsc-line::before {\n    content: ' ';\n    position: absolute;\n    width: 100%;\n  }\n  \n  .grvsc-line-diff-add::before {\n    background-color: var(--grvsc-line-diff-add-background-color, rgba(0, 255, 60, 0.2));\n  }\n  \n  .grvsc-line-diff-del::before {\n    background-color: var(--grvsc-line-diff-del-background-color, rgba(255, 0, 20, 0.2));\n  }\n  \n  .grvsc-line-number {\n    padding: 0 2px;\n    text-align: right;\n    opacity: 0.7;\n  }\n  \n  .github-light-theme {\n    background-color: #ffffff;\n    color: #000000;\n  }\n  .github-light-theme .grvsc-tiszgT-5 { color: #D73A49; }\n  .github-light-theme .grvsc-tiszgT-1 { color: #000000; }\n  .github-light-theme .grvsc-tiszgT-10 { color: #6F42C1; }\n  .github-light-theme .grvsc-tiszgT-7 { color: #005CC5; }\n  .github-light-theme .grvsc-tiszgT-8 { color: #032F62; }\n  .github-light-theme .grvsc-line-highlighted::before {\n    background-color: var(--grvsc-line-highlighted-background-color, rgba(0, 0, 0, 0.05));\n    box-shadow: inset var(--grvsc-line-highlighted-border-width, 4px) 0 0 0 var(--grvsc-line-highlighted-border-color, rgba(0, 0, 0, 0.2));\n  }\n  body[data-theme=dark] .grvsc-ps-t4tStz { color: #ffffff; }\n  body[data-theme=dark] .grvsc-ps-t4tStz .grvsc-t4tStz-9 { color: #EB7E81; }\n  body[data-theme=dark] .grvsc-ps-t4tStz .grvsc-t4tStz-1 { color: #FFFFFF; }\n  body[data-theme=dark] .grvsc-ps-t4tStz .grvsc-t4tStz-3 { color: #66B5F6; }\n  body[data-theme=dark] .grvsc-ps-t4tStz .grvsc-t4tStz-5 { color: #BB97E7; }\n  body[data-theme=dark] .grvsc-ps-t4tStz .grvsc-t4tStz-10 { color: #9DCDF5; }\n  body[data-theme=dark] .grvsc-ps-t4tStz .grvsc-line-highlighted::before {\n    background-color: var(--grvsc-line-highlighted-background-color, rgba(0, 0, 0, 0.05));\n    box-shadow: inset var(--grvsc-line-highlighted-border-width, 4px) 0 0 0 var(--grvsc-line-highlighted-border-color, rgba(0, 0, 0, 0.2));\n  }\n</style>","frontmatter":{"title":"enum으로 Singleton 구현하기","desc":"class Singleton과 enum Singleton의 장단점 비교","thumbnail":{"childImageSharp":{"gatsbyImageData":{"layout":"fixed","placeholder":{"fallback":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAAAsTAAALEwEAmpwYAAABnUlEQVR42qWTwUvCcBTH/aOCbnXo0DEQioogIfQQRYcIYnnoMkJUDDUKQfSoePJmxyjIUxElQWQjQqV0c7+2aXPOb7/9KtvUOtRjb2+/vbfP7/F737nQtx69bP5Hc/VhGIB8Qq27aZp02RtI9/o+AkgL2i2YUv3DxRfA6DjAg5BBdwB7bQ0K54PsHgfxTIMsTELb32UFuq6jWDyHIAhsbXVrmaqqkGUZjUYD3W7XCew+3kOeGYPKeaGszULjNyEuTbGCo0QCgUAA+XwelUqFgUVRpJsUkc1m4fV6EYvF2AbfwKcHyLQrZXsFRukSxs0FyPocbd3EdamEdDrNPk6lUuA4DqFQCNFoFPF4HDzPIxgMQtM0G1C4A1meRutwj8IFGLdXIBuLNGHg5PQMuVwO4XAYkUiERb/fzzpO0O4zmQySySQIIbYzfGtB2fLgddUNdccHMj8B7YBnBZIk4bhQQK1WY2dmxWq1yt5bz81mE+VymeWcU+7oMOs1mM8VOukGnbIxpLGfpDIsm1Fi/tIhjdYUf5OMXaeuIcg//5R3va4oUHlYpuMAAAAASUVORK5CYII="},"images":{"fallback":{"src":"/static/01bdfc9cacc865c8fa02323ad06c49ee/1624f/swift.png","srcSet":"/static/01bdfc9cacc865c8fa02323ad06c49ee/1624f/swift.png 1600w","sizes":"1600px"},"sources":[{"srcSet":"/static/01bdfc9cacc865c8fa02323ad06c49ee/e9d78/swift.webp 1600w","type":"image/webp","sizes":"1600px"}]},"width":1600,"height":900}}},"date":"2025-02-21","category":"Swift"}}},"pageContext":{"slug":"/blog/enum-for-singleton/"}},"staticQueryHashes":["2420453757"],"slicesMap":{}}